<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Postal Cultural Interactiva ‚Äì Tzolk'in Maya</title>
    <style>
        body {
            font-family: 'Montserrat', serif;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 2px solid #e2e8f0;
        }
        
        h1 {
            color: #6366f1;
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .section {
            background: #f8fafc;
            padding: 25px;
            border-left: 6px solid #6366f1;
            margin-bottom: 25px;
            border-radius: 8px;
            transition: transform 0.2s ease;
        }
        
        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .cultural-note {
            background: linear-gradient(45deg, #e0e7ff, #f3e8ff);
            border-left-color: #6366f1;
        }
        
        .calculator-section {
            background: linear-gradient(45deg, #f1f5f9, #e2e8f0);
            border-left-color: #64748b;
        }
        
        .postcard-section {
            background: linear-gradient(45deg, #f8fafc, #f1f5f9);
            border-left-color: #475569;
        }
        
        .reflection-section {
            background: linear-gradient(45deg, #e0e7ff, #f8fafc);
            border-left-color: #8b5cf6;
        }
        
        input, textarea, button {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, textarea:focus {
            border-color: #6366f1;
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        button {
            background: linear-gradient(45deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            background: linear-gradient(45deg, #4f46e5, #6366f1);
            transform: translateY(-1px);
        }
        
        .result {
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(45deg, #e0e7ff, #f1f5f9);
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            border: 2px solid #c4b5fd;
        }
        
        .nawal-info {
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(45deg, #f8fafc, #e2e8f0);
            border-radius: 8px;
            border: 2px solid #64748b;
        }
        
        .glyph-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .glyph-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .glyph-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
        }
        
        .glyph-name {
            font-weight: bold;
            color: #6366f1;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .glyph-meaning {
            font-size: 0.9rem;
            color: #475569;
            font-style: italic;
        }
        
        .attribution {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #475569;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        
        .footer {
            background: #1e293b;
            color: #cbd5e1;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
            border-radius: 8px;
            font-size: 0.85rem;
        }
        
        .footer p {
            margin: 5px 0;
        }
        
        label {
            font-weight: bold;
            color: #475569;
            display: block;
            margin-bottom: 5px;
        }
        
        .highlight {
            background: linear-gradient(45deg, #e0e7ff, #f1f5f9);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: #6366f1;
        }
        
        .date-note {
            background: linear-gradient(45deg, #fef3c7, #fef9e7);
            padding: 12px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #92400e;
            border: 1px solid #f59e0b;
            font-style: normal;
        }
        
        .translation {
            color: #94a3b8;
            font-size: 0.9rem;
            font-style: italic;
            margin-top: 5px;
        }
        
        .bilingual-meaning {
            margin-top: 10px;
            padding: 15px;
            background: #f8fafc;
            border-left: 3px solid #64748b;
            border-radius: 5px;
        }
        
        .bilingual-meaning .spanish {
            color: #475569;
            margin-bottom: 8px;
        }
        
        .bilingual-meaning .english {
            color: #64748b;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåü Postal Cultural Interactiva ‚Äì Tzolk'in Maya üåü</h1>
        
        <div class="section cultural-note">
            <h2>üìö Sobre el Calendario Sagrado Maya</h2>
            <p>El <strong>Tzolk'in</strong> es el calendario sagrado de 260 d√≠as usado por los pueblos mayas desde hace m√°s de 2,000 a√±os. Combina 13 n√∫meros con 20 signos (nawales) para crear una rueda del tiempo que refleja los ritmos c√≥smicos y la naturaleza humana.</p>
            <p class="translation">The Tzolk'in is the sacred 260-day calendar used by Mayan peoples for over 2,000 years. It combines 13 numbers with 20 signs (nawales) to create a wheel of time that reflects cosmic rhythms and human nature.</p>
        </div>

        <div class="section calculator-section">
            <h2>üéØ Descubre tu D√≠a Maya</h2>
            <label for="birthdate">üìÖ Ingresa tu fecha de nacimiento:</label>
            <input type="date" id="birthdate" />
            <button onclick="calculateTzolkin()">‚ú® Calcular mi Nawal Maya</button>
            
            <div class="date-note">
                üìù Cultural Note / Nota cultural: In Spanish, dates are written starting with the day, not the month. For example: 25 de diciembre de 2023 (day/month/year) instead of December 25, 2023 (month/day/year).
            </div>
            
            <div id="tzolkinResult" class="result" style="display: none;"></div>
            <div id="nawalInfo" class="nawal-info" style="display: none;"></div>
        </div>

        <div class="section postcard-section">
            <h2>‚úèÔ∏è Tu Postal Cultural</h2>
            
            <label for="mayaDay">Tu d√≠a maya:</label>
            <input type="text" id="mayaDay" placeholder="Ej. Cinco Kimi" readonly />
            
            <label for="symbolMeaning">¬øQu√© representa este s√≠mbolo para ti?</label>
            <textarea id="symbolMeaning" rows="3" placeholder="Reflexiona sobre las cualidades de tu nawal y c√≥mo se manifiestan en tu vida..."></textarea>
            
            <label for="favoriteTime">¬øA qu√© hora naciste o qu√© hora te gusta m√°s del d√≠a?</label>
            <input type="text" id="favoriteTime" placeholder="Ej. Me gusta la ma√±ana, a las nueve." />
            
            <label for="birthDateSpanish">Tu fecha de nacimiento en espa√±ol:</label>
            <input type="text" id="birthDateSpanish" placeholder="Ej. quince de marzo de mil novecientos noventa y cinco" readonly />
        </div>

        <div class="section reflection-section">
            <h2>üß† Reflexi√≥n Cultural</h2>
            <p><strong>Usa uno de estos verbos regulares:</strong> <span class="highlight">caminar, trabajar, comer, bailar, escuchar, cuidar, dibujar, leer, visitar, ayudar</span></p>
            
            <label for="dailyConnection">¬øC√≥mo se relaciona tu nawal con tu rutina diaria?</label>
            <textarea id="dailyConnection" rows="4" placeholder="Ejemplo: Yo ayudo a mi familia con mis manos porque mi nawal representa sanaci√≥n. / Yo camino todos los d√≠as porque mi s√≠mbolo es el camino."></textarea>
        </div>

        <div class="section">
            <h2>üåÄ Los 20 Nawales del Tzolk'in</h2>
            <div class="glyph-grid" id="glyphGrid"></div>
        </div>

        <div class="attribution">
            <p><strong>Cultural Recognition / Reconocimiento Cultural:</strong> This knowledge belongs to the Maya communities who keep these traditions alive today. The wisdom of the Tzolk'in is maintained by the Ajq'ijab (Maya spiritual guides) and must be respected as a living tradition, not as historical curiosity. / Este conocimiento pertenece a las comunidades mayas que mantienen estas tradiciones vivas hasta hoy. La sabidur√≠a del Tzolk'in es mantenida por los Ajq'ijab (gu√≠as espirituales mayas) y debe ser respetada como tradici√≥n viva, no como curiosidad hist√≥rica.</p>
            <p><strong>Technical Note / Nota t√©cnica:</strong> This calculator uses Yucatec names from the Smithsonian standard. Different Maya communities (Yucatec, K'iche', Kaqchikel, etc.) may use slightly different names and orderings for the same sacred concepts. / Este calculador usa los nombres <em>Yucatecos</em> del est√°ndar del Smithsonian. Las diferentes comunidades mayas (Yucateco, K'iche', Kaqchikel, etc.) pueden usar nombres y ordenamientos ligeramente diferentes para los mismos conceptos sagrados.</p>
            <p><em>Algorithm / Algoritmo: GMT correlation 584283 with archaeological adjustment / correlaci√≥n GMT 584283 con ajuste arqueol√≥gico (position 0 = 4 Ajaw / posici√≥n 0 = 4 Ajaw)</em></p>
        </div>
        
        <div class="footer">
            <p>¬© 2025 Spanish Learning Edge LLC. All rights reserved.</p>
            <p>Designed using instructional expertise and AI-assisted tools. Not for redistribution without permission.</p>
        </div>
    </div>

    <script>
        // Accurate Julian Day calculation (Fliegel-van Flandern algorithm)
        function gregorianToJulianDay(year, month, day) {
            const a = Math.floor((14 - month) / 12);
            const y = year - a;
            const m = month + 12 * a - 3;
            
            return day + Math.floor((153 * m + 2) / 5) + 365 * y + 
                   Math.floor(y / 4) - Math.floor(y / 100) + 
                   Math.floor(y / 400) + 1721119;
        }

        // 20 Day Signs - Using Smithsonian/Yucatec standard order for compatibility
        const tzolkinDaySigns = [
            { 
                name: "Imix", 
                spanish: "Lagarto", 
                meaning: "Agua primordial, madre c√≥smica, inicio de la vida.",
                meaningEn: "Primordial water, cosmic mother, beginning of life."
            },
            { 
                name: "Ik'", 
                spanish: "Viento", 
                meaning: "Esp√≠ritu, aliento vital, comunicaci√≥n.",
                meaningEn: "Spirit, vital breath, communication."
            },
            { 
                name: "Ak'bal", 
                spanish: "Noche", 
                meaning: "Oscuridad, casa, introspecci√≥n, sue√±os.",
                meaningEn: "Darkness, house, introspection, dreams."
            },
            { 
                name: "K'an", 
                spanish: "Ma√≠z", 
                meaning: "Semilla, crecimiento, abundancia.",
                meaningEn: "Seed, growth, abundance."
            },
            { 
                name: "Chikchan", 
                spanish: "Serpiente", 
                meaning: "Fuerza vital, poder, sabidur√≠a ancestral.",
                meaningEn: "Life force, power, ancestral wisdom."
            },
            { 
                name: "Kimi", 
                spanish: "Muerte", 
                meaning: "Transformaci√≥n, renacimiento, cambio.",
                meaningEn: "Transformation, rebirth, change."
            },
            { 
                name: "Manik'", 
                spanish: "Venado", 
                meaning: "Mano, sanaci√≥n, herramientas, destrezas.",
                meaningEn: "Hand, healing, tools, skills."
            },
            { 
                name: "Lamat", 
                spanish: "Estrella", 
                meaning: "Venus, armon√≠a, arte, belleza.",
                meaningEn: "Venus, harmony, art, beauty."
            },
            { 
                name: "Muluk", 
                spanish: "Agua", 
                meaning: "Luna, emociones, purificaci√≥n.",
                meaningEn: "Moon, emotions, purification."
            },
            { 
                name: "Ok", 
                spanish: "Perro", 
                meaning: "Lealtad, amor incondicional, gu√≠a.",
                meaningEn: "Loyalty, unconditional love, guide."
            },
            { 
                name: "Chuwen", 
                spanish: "Mono", 
                meaning: "Arte, creatividad, tiempo, tejedor del destino.",
                meaningEn: "Art, creativity, time, weaver of destiny."
            },
            { 
                name: "Eb'", 
                spanish: "Escalera", 
                meaning: "Camino, sendero vital, destino.",
                meaningEn: "Path, life journey, destiny."
            },
            { 
                name: "B'en", 
                spanish: "Ca√±a", 
                meaning: "Hogar, autoridad, crecimiento hacia arriba.",
                meaningEn: "Home, authority, upward growth."
            },
            { 
                name: "Ix", 
                spanish: "Jaguar", 
                meaning: "Magia, poder femenino, intuici√≥n.",
                meaningEn: "Magic, feminine power, intuition."
            },
            { 
                name: "Men", 
                spanish: "√Åguila", 
                meaning: "Visi√≥n superior, sabidur√≠a, luna.",
                meaningEn: "Higher vision, wisdom, moon."
            },
            { 
                name: "K'ib'", 
                spanish: "B√∫ho", 
                meaning: "Conocimiento, perd√≥n, ancestros.",
                meaningEn: "Knowledge, forgiveness, ancestors."
            },
            { 
                name: "Kab'an", 
                spanish: "Tierra", 
                meaning: "Pensamiento, evoluci√≥n, terremotos.",
                meaningEn: "Thought, evolution, earthquakes."
            },
            { 
                name: "Etz'nab", 
                spanish: "Pedernal", 
                meaning: "Cuchillo, curaci√≥n por corte, claridad.",
                meaningEn: "Knife, healing through cutting, clarity."
            },
            { 
                name: "Kawak", 
                spanish: "Tormenta", 
                meaning: "Lluvia, purificaci√≥n, energ√≠a femenina.",
                meaningEn: "Rain, purification, feminine energy."
            },
            { 
                name: "Ajaw", 
                spanish: "Se√±or", 
                meaning: "Sol, flor, liderazgo espiritual.",
                meaningEn: "Sun, flower, spiritual leadership."
            }
        ];

        // Number words in Spanish
        const spanishNumbers = [
            "", "uno", "dos", "tres", "cuatro", "cinco", "seis", "siete", 
            "ocho", "nueve", "diez", "once", "doce", "trece"
        ];

        // Months in Spanish
        const spanishMonths = [
            "", "enero", "febrero", "marzo", "abril", "mayo", "junio",
            "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"
        ];

        function numberToSpanish(num) {
            const ones = ["", "uno", "dos", "tres", "cuatro", "cinco", "seis", "siete", "ocho", "nueve"];
            const teens = ["diez", "once", "doce", "trece", "catorce", "quince", "diecis√©is", "diecisiete", "dieciocho", "diecinueve"];
            const tens = ["", "", "veinte", "treinta", "cuarenta", "cincuenta", "sesenta", "setenta", "ochenta", "noventa"];
            const hundreds = ["", "ciento", "doscientos", "trescientos", "cuatrocientos", "quinientos", "seiscientos", "setecientos", "ochocientos", "novecientos"];
            const thousands = ["", "mil", "dos mil", "tres mil", "cuatro mil", "cinco mil", "seis mil", "siete mil", "ocho mil", "nueve mil"];

            if (num === 0) return "cero";
            if (num === 1) return "uno";
            if (num < 10) return ones[num];
            if (num < 20) return teens[num - 10];
            if (num < 100) {
                return tens[Math.floor(num / 10)] + (num % 10 ? " y " + ones[num % 10] : "");
            }
            if (num === 100) return "cien";
            if (num < 1000) {
                return hundreds[Math.floor(num / 100)] + (num % 100 ? " " + numberToSpanish(num % 100) : "");
            }
            if (num < 10000) {
                const thousand = Math.floor(num / 1000);
                const remainder = num % 1000;
                if (thousand === 1) {
                    return "mil" + (remainder ? " " + numberToSpanish(remainder) : "");
                }
                return thousands[thousand] + (remainder ? " " + numberToSpanish(remainder) : "");
            }
            
            return num.toString(); // Fallback for larger numbers
        }

        function calculateTzolkin() {
            const input = document.getElementById("birthdate").value;
            if (!input) {
                alert("Por favor, introduce una fecha.");
                return;
            }

            const [year, month, day] = input.split("-").map(Number);
            
            // Convert to Julian Day Number
            const jdn = gregorianToJulianDay(year, month, day);
            
            // GMT correlation constant (584283)
            const gmtCorrelation = 584283;
            const daysSinceCreation = jdn - gmtCorrelation;
            
            // Calculate Tzolk'in position (260-day cycle)
            const tzolkinPosition = ((daysSinceCreation % 260) + 260) % 260;
            
            // Calculate number (1-13) and day sign (0-19)
            // CORRECCI√ìN: Ajuste para que posici√≥n 0 = 4 Ajaw (fecha creaci√≥n maya)
            const number = ((tzolkinPosition + 3) % 13) + 1;
            const daySignIndex = (tzolkinPosition + 19) % 20;
            const daySign = tzolkinDaySigns[daySignIndex];
            
            // Display results
            const resultDiv = document.getElementById("tzolkinResult");
            const nawalDiv = document.getElementById("nawalInfo");
            
            resultDiv.innerHTML = `
                <strong>üåü Tu d√≠a en el Tzolk'in Maya / Your Mayan Tzolk'in Day:</strong><br>
                <span style="font-size: 1.3rem; color: #6366f1;">${spanishNumbers[number]} ${daySign.spanish}</span><br>
                <span style="font-size: 1.1rem; color: #64748b;">(${number} ${daySign.name})</span>
            `;
            
            nawalDiv.innerHTML = `
                <h3>üîÆ Significado de tu Nawal / Your Nawal's Meaning</h3>
                <div class="bilingual-meaning">
                    <div class="spanish">
                        <strong>${daySign.name} (${daySign.spanish}):</strong> ${daySign.meaning}
                    </div>
                    <div class="english">
                        <strong>${daySign.name} (${daySign.spanish}):</strong> ${daySign.meaningEn}
                    </div>
                </div>
                <p style="margin-top: 15px;"><em>El n√∫mero ${number} amplifica estas cualidades con su propia energ√≠a numerol√≥gica maya.</em></p>
                <p style="color: #64748b; font-style: italic;">The number ${number} amplifies these qualities with its own Mayan numerological energy.</p>
            `;
            
            // Fill postcard fields
            document.getElementById("mayaDay").value = `${spanishNumbers[number]} ${daySign.spanish}`;
            
            // Convert date to Spanish
            const daySpanish = numberToSpanish(day);
            const monthSpanish = spanishMonths[month];
            const yearSpanish = numberToSpanish(year);
            document.getElementById("birthDateSpanish").value = `${daySpanish} de ${monthSpanish} de ${yearSpanish}`;
            
            resultDiv.style.display = "block";
            nawalDiv.style.display = "block";
        }

        // Create glyph grid
        function createGlyphGrid() {
            const grid = document.getElementById("glyphGrid");
            
            tzolkinDaySigns.forEach((sign, index) => {
                const card = document.createElement("div");
                card.className = "glyph-card";
                card.innerHTML = `
                    <div class="glyph-name">${sign.name}</div>
                    <div style="font-weight: bold; margin: 5px 0;">(${sign.spanish})</div>
                    <div class="glyph-meaning">${sign.meaning}</div>
                    <div style="color: #94a3b8; font-size: 0.85rem; margin-top: 5px;">${sign.meaningEn}</div>
                `;
                grid.appendChild(card);
            });
        }

        // Initialize
        document.addEventListener("DOMContentLoaded", function() {
            createGlyphGrid();
        });
    </script>
</body>
</html>
